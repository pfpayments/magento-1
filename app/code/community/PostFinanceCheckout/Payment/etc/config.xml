<?xml version="1.0" encoding="UTF-8"?>
<!--
/**
 * PostFinance Checkout Magento 1
 *
 * This Magento extension enables to process payments with PostFinance Checkout (https://www.postfinance.ch/).
 *
 * @package PostFinanceCheckout_Payment
 * @author customweb GmbH (http://www.customweb.com/)
 * @license http://www.apache.org/licenses/LICENSE-2.0  Apache Software License (ASL 2.0)
 */
-->
<config>
	<modules>
		<PostFinanceCheckout_Payment>
			<version>1.0.25</version>
		</PostFinanceCheckout_Payment>
	</modules>
	<global>
		<models>
			<postfinancecheckout_payment>
				<class>PostFinanceCheckout_Payment_Model</class>
				<resourceModel>postfinancecheckout_payment_resource</resourceModel>
			</postfinancecheckout_payment>
			<postfinancecheckout_payment_resource>
				<class>PostFinanceCheckout_Payment_Model_Resource</class>
				<deprecatedNode>postfinancecheckout_payment_mysql4</deprecatedNode>
				<entities>
					<transaction_info>
						<table>postfinancecheckout_payment_transaction_info</table>
					</transaction_info>
					<token_info>
						<table>postfinancecheckout_payment_token_info</table>
					</token_info>
					<payment_method_configuration>
						<table>postfinancecheckout_payment_method_configuration</table>
					</payment_method_configuration>
					<refund_job>
						<table>postfinancecheckout_payment_refund_job</table>
					</refund_job>
				</entities>
			</postfinancecheckout_payment_resource>
		</models>
		<resources>
			<postfinancecheckout_payment_setup>
				<setup>
					<module>PostFinanceCheckout_Payment</module>
				</setup>
			</postfinancecheckout_payment_setup>
			<postfinancecheckout_payment_read>
				<connection>
					<use>core_read</use>
				</connection>
			</postfinancecheckout_payment_read>
			<postfinancecheckout_payment_write>
				<connection>
					<use>core_write</use>
				</connection>
			</postfinancecheckout_payment_write>
		</resources>
		<blocks>
			<postfinancecheckout_payment>
				<class>PostFinanceCheckout_Payment_Block</class>
			</postfinancecheckout_payment>
		</blocks>
		<helpers>
			<postfinancecheckout_payment>
				<class>PostFinanceCheckout_Payment_Helper</class>
			</postfinancecheckout_payment>
		</helpers>
		<events>
			<resource_get_tablename>
				<observers>
					<postfinancecheckout_payment_get_tablename>
						<type>singleton</type>
						<class>postfinancecheckout_payment/observer_core</class>
						<method>addAutoloader</method>
					</postfinancecheckout_payment_get_tablename>
				</observers>
			</resource_get_tablename>
			<controller_front_init_before>
				<observers>
					<postfinancecheckout_payment_front_init_before>
						<type>singleton</type>
						<class>postfinancecheckout_payment/observer_core</class>
						<method>frontInitBefore</method>
					</postfinancecheckout_payment_front_init_before>
				</observers>
			</controller_front_init_before>
			<adminhtml_init_system_config>
				<observers>
					<postfinancecheckout_payment_init_system_config>
						<type>singleton</type>
						<class>postfinancecheckout_payment/observer_core</class>
						<method>initSystemConfig</method>
					</postfinancecheckout_payment_init_system_config>
				</observers>
			</adminhtml_init_system_config>
			<admin_system_config_changed_section_postfinancecheckout_payment>
				<observers>
					<postfinancecheckout_payment_config_changed>
						<type>singleton</type>
						<class>postfinancecheckout_payment/observer_core</class>
						<method>configChanged</method>
					</postfinancecheckout_payment_config_changed>
				</observers>
			</admin_system_config_changed_section_postfinancecheckout_payment>
			<sales_order_invoice_cancel>
				<observers>
					<postfinancecheckout_payment_cancel_invoice>
						<type>singleton</type>
						<class>postfinancecheckout_payment/observer_payment</class>
						<method>cancelInvoice</method>
					</postfinancecheckout_payment_cancel_invoice>
				</observers>
			</sales_order_invoice_cancel>
			<sales_order_invoice_register>
				<observers>
					<postfinancecheckout_payment_invoice_register>
						<type>singleton</type>
						<class>postfinancecheckout_payment/observer_payment</class>
						<method>registerInvoice</method>
					</postfinancecheckout_payment_invoice_register>
				</observers>
			</sales_order_invoice_register>
			<sales_order_payment_capture>
				<observers>
					<postfinancecheckout_payment_payment_capture>
						<type>singleton</type>
						<class>postfinancecheckout_payment/observer_payment</class>
						<method>capturePayment</method>
					</postfinancecheckout_payment_payment_capture>
				</observers>
			</sales_order_payment_capture>
			<sales_model_service_quote_submit_success>
				<observers>
					<postfinancecheckout_payment_quote_submit_success>
						<type>singleton</type>
						<class>postfinancecheckout_payment/observer_payment</class>
						<method>quoteSubmitSuccess</method>
					</postfinancecheckout_payment_quote_submit_success>
				</observers>
			</sales_model_service_quote_submit_success>
			<sales_convert_order_to_quote>
				<observers>
					<postfinancecheckout_payment_convert_order_to_quote>
						<type>singleton</type>
						<class>postfinancecheckout_payment/observer_payment</class>
						<method>convertOrderToQuote</method>
					</postfinancecheckout_payment_convert_order_to_quote>
				</observers>
			</sales_convert_order_to_quote>

			<!-- Config synchronize events -->
			<postfinancecheckout_payment_config_synchronize>
				<observers>
					<postfinancecheckout_payment_synchronize_payment_method_configurations>
						<type>singleton</type>
						<class>postfinancecheckout_payment/service_paymentMethodConfiguration</class>
						<method>synchronize</method>
					</postfinancecheckout_payment_synchronize_payment_method_configurations>
					<postfinancecheckout_payment_install_webhooks>
						<type>singleton</type>
						<class>postfinancecheckout_payment/service_webhook</class>
						<method>install</method>
					</postfinancecheckout_payment_install_webhooks>
					<postfinancecheckout_payment_update_manual_tasks>
						<type>singleton</type>
						<class>postfinancecheckout_payment/service_manualTask</class>
						<method>update</method>
					</postfinancecheckout_payment_update_manual_tasks>
				</observers>
			</postfinancecheckout_payment_config_synchronize>

			<!-- Webhook events -->
			<postfinancecheckout_payment_webhook_deliveryindication>
				<observers>
					<postfinancecheckout_payment_webhook_deliveryindication>
						<type>singleton</type>
						<class>postfinancecheckout_payment/webhook_deliveryIndication</class>
						<method>listen</method>
					</postfinancecheckout_payment_webhook_deliveryindication>
				</observers>
			</postfinancecheckout_payment_webhook_deliveryindication>
			<postfinancecheckout_payment_webhook_manualtask>
				<observers>
					<postfinancecheckout_payment_webhook_manualtask>
						<type>singleton</type>
						<class>postfinancecheckout_payment/webhook_manualTask</class>
						<method>listen</method>
					</postfinancecheckout_payment_webhook_manualtask>
				</observers>
			</postfinancecheckout_payment_webhook_manualtask>
			<postfinancecheckout_payment_webhook_paymentmethodconfiguration>
				<observers>
					<postfinancecheckout_payment_webhook_paymentmethodconfiguration>
						<type>singleton</type>
						<class>postfinancecheckout_payment/webhook_paymentMethodConfiguration</class>
						<method>listen</method>
					</postfinancecheckout_payment_webhook_paymentmethodconfiguration>
				</observers>
			</postfinancecheckout_payment_webhook_paymentmethodconfiguration>
			<postfinancecheckout_payment_webhook_refund>
				<observers>
					<postfinancecheckout_payment_webhook_refund>
						<type>singleton</type>
						<class>postfinancecheckout_payment/webhook_refund</class>
						<method>listen</method>
					</postfinancecheckout_payment_webhook_refund>
				</observers>
			</postfinancecheckout_payment_webhook_refund>
			<postfinancecheckout_payment_webhook_transaction>
				<observers>
					<postfinancecheckout_payment_webhook_transaction>
						<type>singleton</type>
						<class>postfinancecheckout_payment/webhook_transaction</class>
						<method>listen</method>
					</postfinancecheckout_payment_webhook_transaction>
				</observers>
			</postfinancecheckout_payment_webhook_transaction>
			<postfinancecheckout_payment_webhook_transactioncompletion>
				<observers>
					<postfinancecheckout_payment_webhook_transactioncompletion>
						<type>singleton</type>
						<class>postfinancecheckout_payment/webhook_transactionCompletion</class>
						<method>listen</method>
					</postfinancecheckout_payment_webhook_transactioncompletion>
				</observers>
			</postfinancecheckout_payment_webhook_transactioncompletion>
			<postfinancecheckout_payment_webhook_transactioninvoice>
				<observers>
					<postfinancecheckout_payment_webhook_transactioninvoice>
						<type>singleton</type>
						<class>postfinancecheckout_payment/webhook_transactionInvoice</class>
						<method>listen</method>
					</postfinancecheckout_payment_webhook_transactioninvoice>
				</observers>
			</postfinancecheckout_payment_webhook_transactioninvoice>
			<postfinancecheckout_payment_webhook_token>
				<observers>
					<postfinancecheckout_payment_webhook_token>
						<type>singleton</type>
						<class>postfinancecheckout_payment/webhook_token</class>
						<method>listen</method>
					</postfinancecheckout_payment_webhook_token>
				</observers>
			</postfinancecheckout_payment_webhook_token>
			<postfinancecheckout_payment_webhook_tokenversion>
				<observers>
					<postfinancecheckout_payment_webhook_tokenversion>
						<type>singleton</type>
						<class>postfinancecheckout_payment/webhook_tokenVersion</class>
						<method>listen</method>
					</postfinancecheckout_payment_webhook_tokenversion>
				</observers>
			</postfinancecheckout_payment_webhook_tokenversion>
		</events>
	</global>
	<admin>
		<routers>
			<adminhtml>
				<args>
					<modules>
						<PostFinanceCheckout_Payment after="Mage_Adminhtml">PostFinanceCheckout_Payment</PostFinanceCheckout_Payment>
					</modules>
				</args>
			</adminhtml>
		</routers>
	</admin>
	<adminhtml>
		<translate>
			<modules>
				<PostFinanceCheckout_Payment>
					<files>
						<default>PostFinanceCheckout_Payment.csv</default>
					</files>
				</PostFinanceCheckout_Payment>
			</modules>
		</translate>
		<layout>
			<updates>
				<postfinancecheckout_payment>
					<file>postfinancecheckout_payment.xml</file>
				</postfinancecheckout_payment>
			</updates>
		</layout>
	</adminhtml>
	<frontend>
		<secure_url>
			<postfinancecheckout_payment>/postfinancecheckout</postfinancecheckout_payment>
		</secure_url>
		<routers>
			<PostFinanceCheckout_Payment>
				<use>standard</use>
				<args>
					<module>PostFinanceCheckout_Payment</module>
					<frontName>postfinancecheckout</frontName>
				</args>
			</PostFinanceCheckout_Payment>
		</routers>
		<translate>
			<modules>
				<PostFinanceCheckout_Payment>
					<files>
						<default>PostFinanceCheckout_Payment.csv</default>
					</files>
				</PostFinanceCheckout_Payment>
			</modules>
		</translate>
		<layout>
			<updates>
				<postfinancecheckout_payment>
					<file>postfinancecheckout_payment.xml</file>
				</postfinancecheckout_payment>
			</updates>
		</layout>
	</frontend>
	<crontab>
		<jobs>
			<postfinancecheckout_cron_refund_jobs>
				<schedule>
					<cron_expr>*/10 * * * *</cron_expr>
				</schedule>
				<run>
					<model>postfinancecheckout_payment/observer_cron::processRefundJobs</model>
				</run>
			</postfinancecheckout_cron_refund_jobs>
		</jobs>
	</crontab>
	<default>
		<postfinancecheckout_payment>
			<information>
				<version>1.0.25</version>
				<sdk_version>1.1.7</sdk_version>
			</information>
			<general>
				<base_gateway_url>https://www.postfinance-checkout.ch/</base_gateway_url>
				<manual_tasks>0</manual_tasks>
			</general>
			<email>
				<order>1</order>
			</email>
			<document>
				<customer_download_invoice>1</customer_download_invoice>
				<customer_download_packing_slip>1</customer_download_packing_slip>
			</document>
			<line_item>
				<overwrite_shipping_description>0</overwrite_shipping_description>
				<custom_shipping_description>Shipping</custom_shipping_description>
			</line_item>
		</postfinancecheckout_payment>
	</default>
</config>
